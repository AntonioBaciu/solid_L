{"version":3,"sources":["new.js"],"names":["Discount","type","value","_type","_value","Error","prototype","apply","price","Math","max","showCalculation","Product","name","discount","_name","_price","_discount","Object","defineProperty","get","enumerable","configurable","calculatePrice","shoppingBasket","_products","addProduct","product","push","cart","tableElement","document","querySelector","products","forEach","tr","createElement","td","innerText","appendChild","originalPrice","toFixed"],"mappings":"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","file":"new.0ac14a2a.js","sourceRoot":"..","sourcesContent":["\"use strict\";\r\nvar Discount = /** @class */ (function () {\r\n    function Discount(type, value) {\r\n        if (value === void 0) { value = 0; }\r\n        this._type = type;\r\n        this._value = value;\r\n        if (this._type != \"none\" && value <= 0) {\r\n            throw new Error(\"You cannot create a \" + this._type + \" discount with a negative value\");\r\n        }\r\n    }\r\n    Discount.prototype.apply = function (price) {\r\n        //@todo: instead of using magic values as string in this, it would be a lot better to change them into constant. This would protect us from misspellings. Can you improve this?\r\n        if (this._type === \"none\") {\r\n            return price;\r\n        }\r\n        else if (this._type === \"variable\") {\r\n            return price - (price * this._value) / 100;\r\n        }\r\n        else if (this._type === \"fixed\") {\r\n            return Math.max(0, price - this._value);\r\n        }\r\n        else {\r\n            throw new Error(\"Invalid type of discount\");\r\n        }\r\n    };\r\n    Discount.prototype.showCalculation = function (price) {\r\n        if (this._type === \"none\") {\r\n            return \"No discount\";\r\n        }\r\n        else if (this._type === \"variable\") {\r\n            return price + \" € -  \" + this._value + \"%\";\r\n        }\r\n        else if (this._type === \"fixed\") {\r\n            return price + \"€ -  \" + this._value + \"€ (min 0 €)\";\r\n        }\r\n        else {\r\n            throw new Error(\"Invalid type of discount\");\r\n        }\r\n    };\r\n    return Discount;\r\n}());\r\nvar Product = /** @class */ (function () {\r\n    function Product(name, price, discount) {\r\n        this._name = name;\r\n        this._price = price;\r\n        this._discount = discount;\r\n    }\r\n    Object.defineProperty(Product.prototype, \"name\", {\r\n        get: function () {\r\n            return this._name;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Product.prototype, \"discount\", {\r\n        get: function () {\r\n            return this._discount;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Product.prototype, \"originalPrice\", {\r\n        get: function () {\r\n            return this._price;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //The reason we call this function \"calculateX\" instead of using a getter on Price is because names communicate a lot of meaning between programmers.\r\n    //most programmers would assume a getPrice() would be a simple display of a property that is already calculated, but in fact this function does a (more expensive) operation to calculate on the fly.\r\n    Product.prototype.calculatePrice = function () {\r\n        return this._discount.apply(this._price);\r\n    };\r\n    Product.prototype.showCalculation = function () {\r\n        return this._discount.showCalculation(this._price);\r\n    };\r\n    return Product;\r\n}());\r\nvar shoppingBasket = /** @class */ (function () {\r\n    function shoppingBasket() {\r\n        //this array only accepts Product objects, nothing else\r\n        this._products = [];\r\n    }\r\n    Object.defineProperty(shoppingBasket.prototype, \"products\", {\r\n        get: function () {\r\n            return this._products;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    shoppingBasket.prototype.addProduct = function (product) {\r\n        this._products.push(product);\r\n    };\r\n    return shoppingBasket;\r\n}());\r\nvar cart = new shoppingBasket();\r\ncart.addProduct(new Product(\"Chair\", 25, new Discount(\"fixed\", 10)));\r\n//cart.addProduct(new Product('Chair', 25, new Discount(\"fixed\", -10)));\r\ncart.addProduct(new Product(\"Table\", 50, new Discount(\"variable\", 25)));\r\ncart.addProduct(new Product(\"Bed\", 100, new Discount(\"none\")));\r\nvar tableElement = document.querySelector(\"#cart tbody\");\r\ncart.products.forEach(function (product) {\r\n    var tr = document.createElement(\"tr\");\r\n    var td = document.createElement(\"td\");\r\n    td.innerText = product.name;\r\n    tr.appendChild(td);\r\n    td = document.createElement(\"td\");\r\n    td.innerText = product.originalPrice.toFixed(2) + \" €\";\r\n    tr.appendChild(td);\r\n    td = document.createElement(\"td\");\r\n    td.innerText = product.calculatePrice().toFixed(2) + \" €\";\r\n    tr.appendChild(td);\r\n    td = document.createElement(\"td\");\r\n    td.innerText = product.showCalculation();\r\n    tr.appendChild(td);\r\n    tableElement.appendChild(tr);\r\n});\r\n"]}